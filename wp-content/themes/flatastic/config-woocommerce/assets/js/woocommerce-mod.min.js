!function(e){e.mad_woocommerce_mod=e.mad_woocommerce_mod||{},e.mad_woocommerce_mod.quickPreview=function(){this.$userItems.on("click","a",function(o){o.preventDefault();var t=e(this),a=t.data("image"),i=t.closest(".images").children(".qv-preview").children("img");i.addClass("preview-hide"),setTimeout(function(){i.attr("src",a).removeClass("preview-hide")},400)})},e.mad_woocommerce_mod.tabbed=function(){if(e('[class*="tabs-holder"]').length){var o=e('[class*="tabs-holder"]');o.each(function(o,t){var a=e('[class*="tabs-nav"]',t),i=Modernizr.touch?"touchstart":"click";a.on(i,"a",function(o){o.preventDefault();var t=e(this).parent("li"),a=t.index();t.hasClass("active")&&o.preventDefault(),t.siblings().removeClass("active").end().addClass("active").parent().next().children('[class*="tab-content"]').stop(!0,!0).hide().eq(a).stop(!0,!0).fadeIn(800)})})}},e.mad_woocommerce_mod.toggleCategories=function(){var o=e(".product-categories");o.length&&(o.find("li").each(function(o,t){e(t).children("ul.children").length&&e(t).children("a").append('<span class="toggle-switch"></span>')}),o.on("click",".toggle-switch",function(o){o.preventDefault();var t=e(o.target),a=t.parent("a").parent("li");a.children("ul.children").length&&a.toggleClass("active").children("ul.children").slideToggle()}))},e.mad_woocommerce_mod.setCustomScrollBar=function(){var o=e(".custom-scrollbar");if(o.length)var t=setInterval(function(){o.is(":visible")&&(o.customScrollbar({preventDefaultScroll:!0,updateOnWindowResize:!0}),clearInterval(t))},25)},e.mad_woocommerce_mod.raty=function(){e(".rating").length&&(e(".rating.readonly-rating").raty({readOnly:!0,path:global.paththeme+"/images/img",score:function(){return e(this).attr("data-score")}}),e(".rating.rate").raty({path:global.paththeme+"/images/img",score:function(){return e(this).attr("data-score")}}))},e.mad_woocommerce_mod.zoom=function(){var o=function(){var o=[],t="qv-carousel";return e("#"+t+" a").each(function(){var t="";e(this).data("zoom-image")?t=e(this).data("zoom-image"):e(this).data("image")&&(t=e(this).data("image")),t&&o.push({href:""+t,title:e(this).find("img").attr("title")})}),o};if(e("[data-zoom-image]").length){var t=1;e("body").hasClass("rtl")&&(t=10);var a=e(".jackboxInit"),i="";if(e("#zoom_image").length)var n=e("#zoom_image").elevateZoom({gallery:"qv-carousel",zoomWindowFadeIn:500,zoomWindowFadeOut:500,zoomWindowPosition:t}),r=n.data("elevateZoom"),i=r.getGalleryList();if(i.length)if(1==i.length){var c=i[0].href;a.attr({href:c,"data-group":"images"}),e.jackBox.available(function(){a.jackBox("newItem")}),a.jackBox("init",{dynamic:!0,baseName:global.template_directory+"js/jackbox"})}else e.each(i,function(o,t){if(0==o)return void a.attr({href:t.href,"data-group":"images"});var i=e("<a>",{"data-group":"images","class":"jackboxInit",href:t.href}),n=i.appendTo(a);e.jackBox.available(function(){a.jackBox("newItem"),n.jackBox("newItem")}),a.jackBox("init",{dynamic:!0,baseName:global.template_directory+"js/jackbox"})});else if(e("#qv-carousel").length){var i=o();i&&e.each(i,function(o,t){if(0==o)return void a.attr({href:t.href,"data-group":"images"});var i=e("<a>",{"data-group":"images","class":"jackboxInit",href:t.href}),n=i.appendTo(a);e.jackBox.available(function(){a.jackBox("newItem"),n.jackBox("newItem")}),a.jackBox("init",{dynamic:!0,baseName:global.template_directory+"js/jackbox"})})}else a.jackBox("init",{baseName:global.template_directory+"js/jackbox",className:".jackboxInit"})}},e.mad_woocommerce_mod.productIsotope=function(){function o(o,t){var a=t,i=[],n=a.length;if(a.removeClass("random"),".random"===o){for(var r=0;n>r;r++)i.push(+(Math.random()*n).toFixed());e.each(i,function(e,o){t.eq(Math.floor(Math.random()*o-1)).addClass("random")})}}var t=e(".products-isotope");t.length&&t.each(function(){var a=e(this),i=e("ul.products",a),n={itemSelector:".product",layoutMode:"fitRows",duration:750,easing:"linear",queue:!1};e("body").hasClass("rtl")&&(n.isOriginLeft=!1),i.imagesLoaded(function(){i.isotope(n)}),e(".product-filter",t).on("click","button",function(){var t=e(this),a=t.attr("data-filter");"random"==a&&o.call(t,"."+a,i.find(".product")),t.closest("li").addClass("active").siblings().removeClass("active"),i.isotope("*"==a?{filter:a}:{filter:"."+a})})})},e.mad_woocommerce_mod.specialsCarousel=function(){var o=e(".specials-carousel");o.length&&o.owlCarousel({singleItem:!0,theme:"owl-widget-theme",autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1})},e.mad_woocommerce_mod.productCarousel=function(){var o=e(".product-carousel"),t=e("ul.products",o),a=o.data("columns")||3,i="no_sidebar"==o.data("sidebar")?4:3,n="no_sidebar"==o.data("sidebar")?3:2,r=[[1199,a],[992,i],[768,3],[558,2],[480,n],[470,2],[300,1]];o.length&&t.owlCarousel({theme:"owl-tm-theme",itemsCustom:r,autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1,afterInit:function(t){var a=this,i=a.$userItems,n=e(".product-filter",o);n.on("click","li",function(){var a=e(this),n=a.children().data("filter");t.addClass("changed").find(".owl-wrapper").animate({opacity:0},function(){t.children().remove(),t.data("owlCarousel").destroy(),"*"==n?e.each(i,function(o,a){t.append(e(a))}):e.each(i,function(o,a){var i=e(a);i.hasClass(n)&&(i.find(".animate_vertical_finished").removeClass("animate_vertical_finished"),t.append(i))}),t.owlCarousel({items:o.data("columns")||4,theme:"owl-tm-theme",autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1,afterInit:function(e){e.addClass("no_children_animate")}}),e(window).trigger("resize")}),a.closest("li").addClass("active").siblings().removeClass("active")})}})},e.mad_woocommerce_mod.relatedCarousel=function(){var o=e(".related.products"),t=e("ul.products",o),a=o.parent(".products-container").data("columns")||3,i="no_sidebar"==o.data("sidebar")?4:3,n=[[1199,a],[992,i],[768,2],[480,2],[300,1]];o.length&&t.owlCarousel({itemsCustom:n,theme:"owl-tm-theme",autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1})},e.mad_woocommerce_mod.qvCarousel=function(){var o=e(".qv-carousel");o.length&&o.each(function(){e(this).owlCarousel({theme:"owl-qv-carousel-theme",itemsCustom:[[1199,3],[992,3],[768,3],[480,3],[300,2]],autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1,afterInit:function(){e.mad_woocommerce_mod.quickPreview.call(this)}})})},e.changeView=function(o){this.options=e.extend({},e.changeView.DEFAULTS,o),this.init()},e.changeView.DEFAULTS={},e.changeView.prototype={init:function(){var o=this;o.body=e("body"),o.support={touch:Modernizr.touch},o.view=e(".list-or-grid"),o.view.eventtype=o.support.touch?"touchstart":"click",o.event()},event:function(){this.view.on(this.view.eventtype,"a",e.proxy(function(e){this.load(e)},this))},load:function(o){o.preventDefault();var t=e(o.target),a=t.data("view"),i=t.closest(".products-container");t.siblings().removeClass("active").end().addClass("active"),i.removeClass("view-grid-center view-list").addClass(a),e.cookie("mad_shop_view",a)}},e.mad_woocommerce_mod.cartDropdown=function(){({init:function(){var e=this;e.support={touch:Modernizr.touch,transitions:Modernizr.csstransitions},e.eventtype=e.support.touch?"touchstart":"click";var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};e.transEndEventName=o[Modernizr.prefixed("transition")],e.clicked_product={},e.add_buttons(),e.listeners()},add_buttons:function(){e("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />')},track_ajax_add_to_cart:function(){var o=this;e("body").on(o.eventtype,".add_to_cart_button",function(){var t=e(this),a={},i=t.parents(".product").eq(0);a.name=i.find("h3 a").text(),a.image=i.find(".thumbnail-container img"),a.price=i.find(".price .amount").last().text(),t.block({message:null,overlayCSS:{background:"#fff url("+global.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}}),a.image.length&&(a.image="<img class='added-product-image' src='"+a.image.get(0).src+"' />"),o.clicked_product=a})},update_cart_dropdown:function(o){var t=this,a=e(".cart-dropdown"),i=a.data("text"),n=t.clicked_product;if("undefined"!=typeof o){var r=e("<li class='cart-notification'><div class='added-product-text'><strong>"+n.name+"</strong> "+i+"</div> "+n.image+"</li>");r.on("mouseenter template_hide",function(){var o=e(this);setTimeout(function(){o.removeClass("visible-cart")},100);var a=function(){o.remove()};t.support.transitions?o.on(t.transEndEventName,a):a()}).prependTo(a),setTimeout(function(){r.addClass("visible-cart")},50),setTimeout(function(){r.trigger("template_hide")},2500)}},listeners:function(){var o=this;o.track_ajax_add_to_cart(),e("body").on("added_to_cart",e.proxy(function(t,a){e(".add_to_cart_button").unblock(),e(".shopping-button .count").html(a.count),e(".shopping-button .amount").html(a.subtotal),o.update_cart_dropdown(t)},o)).on(o.eventtype,".cart_list .remove-item",function(){e(this).closest("li").animate({opacity:0},function(){e(this).slideUp(400)})}),e(document).on("click",".plus, .minus",function(){var o=e(this).closest(".quantity").find(".qty"),t=parseFloat(o.val()),a=parseFloat(o.attr("max")),i=parseFloat(o.attr("min")),n=o.attr("step");t&&""!==t&&"NaN"!==t||(t=0),(""===a||"NaN"===a)&&(a=""),(""===i||"NaN"===i)&&(i=0),("any"===n||""===n||void 0===n||"NaN"===parseFloat(n))&&(n=1),e(this).is(".plus")?o.val(a&&(a==t||t>a)?a:t+parseFloat(n)):i&&(i==t||i>t)?o.val(i):t>0&&o.val(t-parseFloat(n)),o.trigger("change")})}}).init()},e.fn.css3Dropdown=function(){return e(this).on("click",function(o){var t=e(this).next();e(this).toggleClass("active"),o.preventDefault(),t.children("ul").children("li").length&&(t.hasClass("opened")?(t.removeClass("opened").addClass("closed"),setTimeout(function(){t.removeClass("closed")},500)):t.addClass("opened"))})},e.mad_woocommerce_mod.check_cart_variation=function(){return"undefined"==typeof wc_add_to_cart_variation_params?!1:(e(".variations_form").wc_variation_form(),void e(".variations_form .variations select").change())},e.mad_woocommerce_mod.quickView=function(){({init:function(){e(".quick-view").length&&new e.mad_popup_prepare(".quick-view",{actionpopup:woocommerce_mod.action_quick_view,noncepopup:woocommerce_mod.nonce_quick_view_popup,on_load:function(){this.container.imagesLoaded(function(){e("div.quantity:not(.buttons_added)",this.modal).addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />'),e(".woo-custom-select").length&&e(".woo-custom-select").heapbox(),e.mad_woocommerce_mod.check_cart_variation(),e.mad_woocommerce_mod.qvCarousel(),e.mad_woocommerce_mod.raty(),e.mad_woocommerce_mod.setCustomScrollBar()})}})}}).init()},e.mad_woocommerce_mod.formLogin=function(){({init:function(){e(".to-login").length&&new e.mad_popup_prepare(".to-login",{actionpopup:woocommerce_mod.action_login,noncepopup:woocommerce_mod.nonce_login_popup,on_load:function(){var o=this,t=e(this.el).data().href;e("form.login").ajaxForm({url:t,success:function(){o.closeModal(),window.location.href=t}})}})}}).init()},e(function(){e.mad_woocommerce_mod.quickView(),e.mad_woocommerce_mod.formLogin(),e.mad_woocommerce_mod.qvCarousel(),e.mad_woocommerce_mod.zoom(),e.mad_woocommerce_mod.relatedCarousel(),e.mad_woocommerce_mod.specialsCarousel(),e.mad_woocommerce_mod.productCarousel(),e.mad_woocommerce_mod.productIsotope(),e.mad_woocommerce_mod.toggleCategories(),e.mad_woocommerce_mod.cartDropdown(),e.mad_woocommerce_mod.raty(),e.mad_woocommerce_mod.tabbed(),e(".list-or-grid").length&&new e.changeView,e(".woo-custom-select").length&&e(".woo-custom-select").heapbox(),e(".to-rating").length&&e(".to-rating").on("click",function(o){o.preventDefault();var t=e(this),a=t.attr("href"),i=e(".woocommerce-tabs");"#reviews"==a&&(e("ul.tabs li.reviews_tab a",i).click(),e("html, body").stop(!0,!0).animate({scrollTop:i.offset().top+"px"},{duration:1e3,easing:"easeOutQuint"}))})})}(jQuery);